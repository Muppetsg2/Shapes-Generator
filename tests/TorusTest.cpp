#include "pch.hpp"
#include "Vertex.hpp"
#include "Shape.hpp"
#include "Torus.hpp"

#include "Helpers.hpp"

#include <vector>

#include <catch2/catch_test_macros.hpp>

class TestableTorus : public Torus {
public:
    using Torus::Torus;
    const std::vector<Vertex>& getVertices() const { return _vertices; }
    const std::vector<unsigned int>& getIndices() const { return _indices; }
};

TEST_CASE("ShapesGenerator.Torus.Generation(MS3IS3MR1.0IR0.2FLAT)") {
    static const std::vector<Vertex> expectedVertices = {
        //POSITION						//TEX COORD		//NORMAL					//TANGENT					//BITANGENT
		{ { 0.75f, 0.144338f, 0.f }, { 0.f, 0.333333f }, { -0.f, 0.707107f, 0.707107f }, { -0.866025f, 0.f, 0.5f }, { 0.866026f, -0.5f, 0.f } },
		{ { -0.5f, 0.f, 0.866025f }, { 0.333333f, 1.f }, { -0.f, 0.707107f, 0.707107f }, { -0.866025f, 0.f, 0.5f }, { 0.866026f, -0.5f, 0.f } },
		{ { 1.f, 0.f, 0.f }, { 0.f, 1.f }, { -0.f, 0.707107f, 0.707107f }, { -0.866025f, 0.f, 0.5f }, { 0.866026f, -0.5f, 0.f } },
		{ { -0.5f, 0.f, 0.866025f }, { 0.333333f, 1.f }, { -0.387298f, 0.894427f, 0.223607f }, { -0.866025f, 0.f, 0.5f }, { -0.433013f, -0.5f, 0.75f } },
		{ { 0.75f, 0.144338f, 0.f }, { 0.f, 0.333333f }, { -0.387298f, 0.894427f, 0.223607f }, { -0.866025f, 0.f, 0.5f }, { -0.433013f, -0.5f, 0.75f } },
		{ { -0.375f, 0.144338f, 0.649519f }, { 0.333333f, 0.333333f }, { -0.387298f, 0.894427f, 0.223607f }, { -0.866025f, 0.f, 0.5f }, { -0.433013f, -0.5f, 0.75f } },
		{ { -0.375f, 0.144338f, 0.649519f }, { 0.333333f, 0.333333f }, { -0.612372f, 0.707107f, -0.353554f }, { 0.f, 0.f, -1.f }, { -0.433013f, -0.5f, 0.75f } },
		{ { -0.5f, 0.f, -0.866025f }, { 0.666667f, 1.f }, { -0.612372f, 0.707107f, -0.353554f }, { 0.f, 0.f, -1.f }, { -0.433013f, -0.5f, 0.75f } },
		{ { -0.5f, 0.f, 0.866025f }, { 0.333333f, 1.f }, { -0.612372f, 0.707107f, -0.353554f }, { 0.f, 0.f, -1.f }, { -0.433013f, -0.5f, 0.75f } },
		{ { -0.5f, 0.f, -0.866025f }, { 0.666667f, 1.f }, { 0.f, 0.894427f, -0.447214f }, { 0.f, 0.f, -1.f }, { -0.433012f, -0.5f, -0.75f } },
		{ { -0.375f, 0.144338f, 0.649519f }, { 0.333333f, 0.333333f }, { 0.f, 0.894427f, -0.447214f }, { 0.f, 0.f, -1.f }, { -0.433012f, -0.5f, -0.75f } },
		{ { -0.375f, 0.144338f, -0.649519f }, { 0.666667f, 0.333333f }, { 0.f, 0.894427f, -0.447214f }, { 0.f, 0.f, -1.f }, { -0.433012f, -0.5f, -0.75f } },
		{ { -0.375f, 0.144338f, -0.649519f }, { 0.666667f, 0.333333f }, { 0.612373f, 0.707107f, -0.353553f }, { 0.866025f, 0.f, 0.5f }, { -0.433012f, -0.5f, -0.75f } },
		{ { 1.f, 0.f, 0.f }, { 1.f, 1.f }, { 0.612373f, 0.707107f, -0.353553f }, { 0.866025f, 0.f, 0.5f }, { -0.433012f, -0.5f, -0.75f } },
		{ { -0.5f, 0.f, -0.866025f }, { 0.666667f, 1.f }, { 0.612373f, 0.707107f, -0.353553f }, { 0.866025f, 0.f, 0.5f }, { -0.433012f, -0.5f, -0.75f } },
		{ { 1.f, 0.f, 0.f }, { 1.f, 1.f }, { 0.387298f, 0.894427f, 0.223607f }, { 0.866025f, 0.f, 0.5f }, { 0.866026f, -0.5f, 0.f } },
		{ { -0.375f, 0.144338f, -0.649519f }, { 0.666667f, 0.333333f }, { 0.387298f, 0.894427f, 0.223607f }, { 0.866025f, 0.f, 0.5f }, { 0.866026f, -0.5f, 0.f } },
		{ { 0.75f, 0.144338f, 0.f }, { 1.f, 0.333333f }, { 0.387298f, 0.894427f, 0.223607f }, { 0.866025f, 0.f, 0.5f }, { 0.866026f, -0.5f, 0.f } },
		{ { 0.75f, -0.144338f, 0.f }, { 0.f, 0.333333f }, { -0.612372f, 0.707107f, -0.353554f }, { -0.866025f, -0.f, 0.5f }, { 0.000001f, -1.f, -0.f } },
		{ { -0.375f, 0.144338f, 0.649519f }, { 0.333333f, 0.333333f }, { -0.612372f, 0.707107f, -0.353554f }, { -0.866025f, -0.f, 0.5f }, { 0.000001f, -1.f, -0.f } },
		{ { 0.75f, 0.144338f, 0.f }, { 0.f, 0.333333f }, { -0.612372f, 0.707107f, -0.353554f }, { -0.866025f, -0.f, 0.5f }, { 0.000001f, -1.f, -0.f } },
		{ { -0.375f, 0.144338f, 0.649519f }, { 0.333333f, 0.333333f }, { 0.f, -0.707107f, -0.707107f }, { -0.866025f, -0.f, 0.5f }, { 0.f, -1.f, -0.f } },
		{ { 0.75f, -0.144338f, 0.f }, { 0.f, 0.333333f }, { 0.f, -0.707107f, -0.707107f }, { -0.866025f, -0.f, 0.5f }, { 0.f, -1.f, -0.f } },
		{ { -0.375f, -0.144338f, 0.649519f }, { 0.333333f, 0.333333f }, { 0.f, -0.707107f, -0.707107f }, { -0.866025f, -0.f, 0.5f }, { 0.f, -1.f, -0.f } },
		{ { -0.375f, -0.144338f, 0.649519f }, { 0.333333f, 0.333333f }, { 0.612373f, 0.707107f, -0.353553f }, { 0.f, -0.f, -1.f }, { -0.f, -1.f, -0.f } },
		{ { -0.375f, 0.144338f, -0.649519f }, { 0.666667f, 0.333333f }, { 0.612373f, 0.707107f, -0.353553f }, { 0.f, -0.f, -1.f }, { -0.f, -1.f, -0.f } },
		{ { -0.375f, 0.144338f, 0.649519f }, { 0.333333f, 0.333333f }, { 0.612373f, 0.707107f, -0.353553f }, { 0.f, -0.f, -1.f }, { -0.f, -1.f, -0.f } },
		{ { -0.375f, 0.144338f, -0.649519f }, { 0.666667f, 0.333333f }, { 0.612372f, -0.707107f, 0.353554f }, { 0.f, -0.f, -1.f }, { -0.f, -1.f, -0.f } },
		{ { -0.375f, -0.144338f, 0.649519f }, { 0.333333f, 0.333333f }, { 0.612372f, -0.707107f, 0.353554f }, { 0.f, -0.f, -1.f }, { -0.f, -1.f, -0.f } },
		{ { -0.375f, -0.144338f, -0.649519f }, { 0.666667f, 0.333333f }, { 0.612372f, -0.707107f, 0.353554f }, { 0.f, -0.f, -1.f }, { -0.f, -1.f, -0.f } },
		{ { -0.375f, -0.144338f, -0.649519f }, { 0.666667f, 0.333333f }, { -0.f, 0.707107f, 0.707107f }, { 0.866025f, -0.f, 0.5f }, { -0.f, -1.f, -0.f } },
		{ { 0.75f, 0.144338f, 0.f }, { 1.f, 0.333333f }, { -0.f, 0.707107f, 0.707107f }, { 0.866025f, -0.f, 0.5f }, { -0.f, -1.f, -0.f } },
		{ { -0.375f, 0.144338f, -0.649519f }, { 0.666667f, 0.333333f }, { -0.f, 0.707107f, 0.707107f }, { 0.866025f, -0.f, 0.5f }, { -0.f, -1.f, -0.f } },
		{ { 0.75f, 0.144338f, 0.f }, { 1.f, 0.333333f }, { -0.612372f, -0.707107f, 0.353553f }, { 0.866025f, -0.f, 0.5f }, { -0.f, -1.f, -0.f } },
		{ { -0.375f, -0.144338f, -0.649519f }, { 0.666667f, 0.333333f }, { -0.612372f, -0.707107f, 0.353553f }, { 0.866025f, -0.f, 0.5f }, { -0.f, -1.f, -0.f } },
		{ { 0.75f, -0.144338f, 0.f }, { 1.f, 0.333333f }, { -0.612372f, -0.707107f, 0.353553f }, { 0.866025f, -0.f, 0.5f }, { -0.f, -1.f, -0.f } },
		{ { 1.f, 0.f, 0.f }, { 0.f, 1.f }, { 0.387298f, -0.894427f, -0.223607f }, { -0.866026f, -0.f, 0.5f }, { 0.866025f, 0.5f, -0.f } },
		{ { -0.375f, -0.144338f, 0.649519f }, { 0.333333f, 0.333333f }, { 0.387298f, -0.894427f, -0.223607f }, { -0.866026f, -0.f, 0.5f }, { 0.866025f, 0.5f, -0.f } },
		{ { 0.75f, -0.144338f, 0.f }, { 0.f, 0.333333f }, { 0.387298f, -0.894427f, -0.223607f }, { -0.866026f, -0.f, 0.5f }, { 0.866025f, 0.5f, -0.f } },
		{ { -0.375f, -0.144338f, 0.649519f }, { 0.333333f, 0.333333f }, { 0.612372f, -0.707107f, 0.353554f }, { -0.866025f, -0.f, 0.5f }, { -0.433013f, 0.5f, 0.75f } },
		{ { 1.f, 0.f, 0.f }, { 0.f, 1.f }, { 0.612372f, -0.707107f, 0.353554f }, { -0.866025f, -0.f, 0.5f }, { -0.433013f, 0.5f, 0.75f } },
		{ { -0.5f, 0.f, 0.866025f }, { 0.333333f, 1.f }, { 0.612372f, -0.707107f, 0.353554f }, { -0.866025f, -0.f, 0.5f }, { -0.433013f, 0.5f, 0.75f } },
		{ { -0.5f, 0.f, 0.866025f }, { 0.333333f, 1.f }, { -0.f, -0.894427f, 0.447214f }, { 0.f, -0.f, -1.f }, { -0.433013f, 0.5f, 0.75f } },
		{ { -0.375f, -0.144338f, -0.649519f }, { 0.666667f, 0.333333f }, { -0.f, -0.894427f, 0.447214f }, { 0.f, -0.f, -1.f }, { -0.433013f, 0.5f, 0.75f } },
		{ { -0.375f, -0.144338f, 0.649519f }, { 0.333333f, 0.333333f }, { -0.f, -0.894427f, 0.447214f }, { 0.f, -0.f, -1.f }, { -0.433013f, 0.5f, 0.75f } },
		{ { -0.375f, -0.144338f, -0.649519f }, { 0.666667f, 0.333333f }, { -0.612373f, -0.707107f, 0.353553f }, { 0.f, -0.f, -1.f }, { -0.433012f, 0.5f, -0.75f } },
		{ { -0.5f, 0.f, 0.866025f }, { 0.333333f, 1.f }, { -0.612373f, -0.707107f, 0.353553f }, { 0.f, -0.f, -1.f }, { -0.433012f, 0.5f, -0.75f } },
		{ { -0.5f, 0.f, -0.866025f }, { 0.666667f, 1.f }, { -0.612373f, -0.707107f, 0.353553f }, { 0.f, -0.f, -1.f }, { -0.433012f, 0.5f, -0.75f } },
		{ { -0.5f, 0.f, -0.866025f }, { 0.666667f, 1.f }, { -0.387298f, -0.894427f, -0.223607f }, { 0.866025f, -0.f, 0.5f }, { -0.433013f, 0.5f, -0.75f } },
		{ { 0.75f, -0.144338f, 0.f }, { 1.f, 0.333333f }, { -0.387298f, -0.894427f, -0.223607f }, { 0.866025f, -0.f, 0.5f }, { -0.433013f, 0.5f, -0.75f } },
		{ { -0.375f, -0.144338f, -0.649519f }, { 0.666667f, 0.333333f }, { -0.387298f, -0.894427f, -0.223607f }, { 0.866025f, -0.f, 0.5f }, { -0.433013f, 0.5f, -0.75f } },
		{ { 0.75f, -0.144338f, 0.f }, { 1.f, 0.333333f }, { 0.f, -0.707107f, -0.707107f }, { 0.866025f, -0.f, 0.5f }, { 0.866025f, 0.5f, 0.f } },
		{ { -0.5f, 0.f, -0.866025f }, { 0.666667f, 1.f }, { 0.f, -0.707107f, -0.707107f }, { 0.866025f, -0.f, 0.5f }, { 0.866025f, 0.5f, 0.f } },
		{ { 1.f, 0.f, 0.f }, { 1.f, 1.f }, { 0.f, -0.707107f, -0.707107f }, { 0.866025f, -0.f, 0.5f }, { 0.866025f, 0.5f, 0.f } }
    };

    static const std::vector<unsigned int> expectedIndices = {
		0, 1, 2,
		3, 4, 5,
		6, 7, 8,
		9, 10, 11,
		12, 13, 14,
		15, 16, 17,
		18, 19, 20,
		21, 22, 23,
		24, 25, 26,
		27, 28, 29,
		30, 31, 32,
		33, 34, 35,
		36, 37, 38,
		39, 40, 41,
		42, 43, 44,
		45, 46, 47,
		48, 49, 50,
		51, 52, 53
    };

    TestableTorus* torus = new TestableTorus(3u, 3u, 1.0f, 0.2f, TorusShading::FLAT, ValuesRange::ONE_TO_ONE);

    const auto& v = torus->getVertices();
    const auto& i = torus->getIndices();

    REQUIRE(v.size() == expectedVertices.size());
    REQUIRE(i.size() == expectedIndices.size());

    for (size_t idx = 0; idx < v.size(); ++idx) {
		CheckVec3Equal(v[idx].Position, expectedVertices[idx].Position, TEST_EPSILON, "Position");
		CheckVec2Equal(v[idx].TexCoord, expectedVertices[idx].TexCoord, TEST_EPSILON, "TexCoord");
		CheckVec3Equal(v[idx].Normal, expectedVertices[idx].Normal, TEST_EPSILON, "Normal");
		CheckVec3Equal(v[idx].Tangent, expectedVertices[idx].Tangent, TEST_EPSILON, "Tangent");
		CheckVec3Equal(v[idx].Bitangent, expectedVertices[idx].Bitangent, TEST_EPSILON, "Bitangent");
    }

    for (size_t idx = 0; idx < i.size(); ++idx) {
        REQUIRE(i[idx] == expectedIndices[idx]);
    }
}

TEST_CASE("ShapesGenerator.Torus.Generation(MS5IS5MR1.2IR1.0SMOOTH)") {
	static const std::vector<Vertex> expectedVertices = {
		//POSITION						//TEX COORD		//NORMAL					//TANGENT					//BITANGENT
		{ { 1.f, 0.f, 0.f }, { 0.f, 1.f }, { 1.f, 0.f, 0.f }, { -0.587785f, 0.f, 0.809017f }, { 0.587785f, -0.809017f, 0.f } },
		{ { 0.309017f, 0.f, 0.951056f }, { 0.2f, 1.f }, { 0.309017f, 0.f, 0.951057f }, { -0.8516f, 0.f, 0.524191f }, { 0.335306f, -0.855684f, 0.394175f } },
		{ { -0.809017f, 0.f, 0.587785f }, { 0.4f, 1.f }, { -0.809017f, 0.f, 0.587785f }, { -0.761695f, 0.f, -0.647936f }, { -0.271268f, -0.855684f, 0.440702f } },
		{ { -0.809017f, 0.f, -0.587785f }, { 0.6f, 1.f }, { -0.809017f, 0.f, -0.587785f }, { 0.380848f, 0.f, -0.924638f }, { -0.502959f, -0.855684f, -0.121807f } },
		{ { 0.309017f, 0.f, -0.951056f }, { 0.8f, 1.f }, { 0.309017f, 0.f, -0.951056f }, { 0.997071f, 0.f, 0.076479f }, { -0.039578f, -0.855684f, -0.515983f } },
		{ { 1.f, 0.f, 0.f }, { 1.f, 1.f }, { 1.f, 0.f, 0.f }, { 0.587785f, 0.f, 0.809017f }, { 0.409955f, -0.862104f, -0.297849f } },
		{ { 0.685917f, 0.432298f, 0.f }, { 0.f, 0.6f }, { 0.309017f, 0.951057f, 0.f }, { -0.587785f, 0.f, 0.809017f }, { 0.770495f, -0.586227f, 0.250349f } },
		{ { 0.21196f, 0.432298f, 0.652346f }, { 0.2f, 0.6f }, { 0.095491f, 0.951057f, 0.293893f }, { -0.951057f, 0.f, 0.309017f }, { 0.368408f, -0.387367f, 0.845117f } },
		{ { -0.554918f, 0.432298f, 0.403172f }, { 0.4f, 0.6f }, { -0.25f, 0.951057f, 0.181636f }, { -0.587785f, 0.f, -0.809017f }, { -0.68991f, -0.387367f, 0.611532f } },
		{ { -0.554918f, 0.432298f, -0.403172f }, { 0.6f, 0.6f }, { -0.25f, 0.951057f, -0.181636f }, { 0.587785f, 0.f, -0.809017f }, { -0.794795f, -0.387367f, -0.467169f } },
		{ { 0.21196f, 0.432298f, -0.652346f }, { 0.8f, 0.6f }, { 0.095492f, 0.951057f, -0.293893f }, { 0.951056f, 0.f, 0.309017f }, { 0.198699f, -0.387367f, -0.900259f } },
		{ { 0.685917f, 0.432298f, 0.f }, { 1.f, 0.6f }, { 0.309017f, 0.951057f, 0.f }, { 0.587785f, 0.f, 0.809017f }, { 0.892846f, -0.09304f, -0.440646f } },
		{ { 0.177719f, 0.267175f, 0.f }, { 0.f, 0.2f }, { -0.809017f, 0.587785f, 0.f }, { -0.587785f, 0.f, 0.809017f }, { 0.557535f, 0.724617f, 0.405073f } },
		{ { 0.054918f, 0.267175f, 0.169021f }, { 0.2f, 0.2f }, { -0.25f, 0.587785f, -0.769421f }, { -0.951057f, 0.f, 0.309017f }, { -0.039578f, 0.855684f, 0.515982f } },
		{ { -0.143778f, 0.267175f, 0.104461f }, { 0.4f, 0.2f }, { 0.654509f, 0.587785f, -0.475528f }, { -0.587785f, 0.f, -0.809017f }, { -0.502959f, 0.855684f, 0.121807f } },
		{ { -0.143778f, 0.267175f, -0.104461f }, { 0.6f, 0.2f }, { 0.654508f, 0.587785f, 0.475528f }, { 0.587785f, 0.f, -0.809017f }, { -0.271268f, 0.855684f, -0.440702f } },
		{ { 0.054918f, 0.267175f, -0.169021f }, { 0.8f, 0.2f }, { -0.25f, 0.587785f, 0.769421f }, { 0.951056f, 0.f, 0.309017f }, { 0.335306f, 0.855684f, -0.394175f } },
		{ { 0.177719f, 0.267175f, 0.f }, { 1.f, 0.2f }, { -0.809017f, 0.587785f, -0.f }, { 0.587785f, 0.f, 0.809017f }, { 0.380847f, 0.924638f, 0.f } },
		{ { 0.17772f, -0.267175f, 0.f }, { 0.f, 0.2f }, { -0.809017f, -0.587785f, 0.f }, { -0.587786f, 0.f, 0.809017f }, { 0.490214f, 0.871602f, -0.f } },
		{ { 0.054918f, -0.267175f, 0.169021f }, { 0.2f, 0.2f }, { -0.25f, -0.587785f, -0.769421f }, { -0.951057f, 0.f, 0.309017f }, { 0.488148f, 0.657576f, 0.573852f } },
		{ { -0.143778f, -0.267175f, 0.104461f }, { 0.4f, 0.2f }, { 0.654509f, -0.587785f, -0.475528f }, { -0.587785f, 0.f, -0.809017f }, { -0.39492f, 0.657576f, 0.641586f } },
		{ { -0.143778f, -0.267175f, -0.104461f }, { 0.6f, 0.2f }, { 0.654508f, -0.587785f, 0.475528f }, { 0.587785f, 0.f, -0.809017f }, { -0.732221f, 0.657576f, -0.17733f } },
		{ { 0.054918f, -0.267175f, -0.169021f }, { 0.8f, 0.2f }, { -0.25f, -0.587785f, 0.769421f }, { 0.951056f, 0.f, 0.309017f }, { -0.057618f, 0.657576f, -0.751182f } },
		{ { 0.17772f, -0.267175f, 0.f }, { 1.f, 0.2f }, { -0.809017f, -0.587785f, -0.f }, { 0.587785f, 0.f, 0.809017f }, { 0.78519f, 0.240906f, -0.570474f } },
		{ { 0.685917f, -0.432298f, 0.f }, { 0.f, 0.6f }, { 0.309017f, -0.951056f, 0.f }, { -0.587785f, 0.f, 0.809017f }, { 0.892846f, 0.093041f, 0.440646f } },
		{ { 0.21196f, -0.432298f, 0.652346f }, { 0.2f, 0.6f }, { 0.095492f, -0.951056f, 0.293893f }, { -0.951057f, 0.f, 0.309017f }, { 0.198699f, 0.387367f, 0.900258f } },
		{ { -0.554919f, -0.432298f, 0.403172f }, { 0.4f, 0.6f }, { -0.25f, -0.951056f, 0.181636f }, { -0.587785f, 0.f, -0.809017f }, { -0.794796f, 0.387367f, 0.467169f } },
		{ { -0.554918f, -0.432298f, -0.403172f }, { 0.6f, 0.6f }, { -0.25f, -0.951056f, -0.181636f }, { 0.587785f, 0.f, -0.809017f }, { -0.689909f, 0.387367f, -0.611532f } },
		{ { 0.21196f, -0.432298f, -0.652346f }, { 0.8f, 0.6f }, { 0.095492f, -0.951056f, -0.293893f }, { 0.951056f, 0.f, 0.309017f }, { 0.368408f, 0.387367f, -0.845117f } },
		{ { 0.685917f, -0.432298f, 0.f }, { 1.f, 0.6f }, { 0.309017f, -0.951056f, 0.f }, { 0.587785f, 0.f, 0.809017f }, { 0.770495f, 0.586228f, -0.250349f } },
		{ { 1.f, 0.f, 0.f }, { 0.f, 1.f }, { 1.f, 0.f, 0.f }, { -0.587785f, 0.f, 0.809017f }, { 0.409954f, 0.862104f, 0.297849f } },
		{ { 0.309017f, 0.f, 0.951056f }, { 0.2f, 1.f }, { 0.309017f, 0.f, 0.951057f }, { -0.997071f, 0.f, 0.076478f }, { -0.039577f, 0.855685f, 0.515982f } },
		{ { -0.809017f, 0.f, 0.587785f }, { 0.4f, 1.f }, { -0.809017f, 0.f, 0.587785f }, { -0.380847f, 0.f, -0.924638f }, { -0.502958f, 0.855684f, 0.121807f } },
		{ { -0.809017f, 0.f, -0.587785f }, { 0.6f, 1.f }, { -0.809017f, 0.f, -0.587785f }, { 0.761695f, 0.f, -0.647936f }, { -0.271268f, 0.855685f, -0.440701f } },
		{ { 0.309017f, 0.f, -0.951056f }, { 0.8f, 1.f }, { 0.309017f, 0.f, -0.951056f }, { 0.8516f, 0.f, 0.524192f }, { 0.335305f, 0.855685f, -0.394175f } },
		{ { 1.f, 0.f, 0.f }, { 1.f, 1.f }, { 1.f, 0.f, 0.f }, { 0.587785f, 0.f, 0.809017f }, { 0.587785f, 0.809017f, 0.f } }
	};

	static const std::vector<unsigned int> expectedIndices = {
		6, 1, 0,
		1, 6, 7,
		7, 2, 1,
		2, 7, 8,
		8, 3, 2,
		3, 8, 9,
		9, 4, 3,
		4, 9, 10,
		10, 5, 4,
		5, 10, 11,
		12, 7, 6,
		7, 12, 13,
		13, 8, 7,
		8, 13, 14,
		14, 9, 8,
		9, 14, 15,
		15, 10, 9,
		10, 15, 16,
		16, 11, 10,
		11, 16, 17,
		18, 13, 12,
		13, 18, 19,
		19, 14, 13,
		14, 19, 20,
		20, 15, 14,
		15, 20, 21,
		21, 16, 15,
		16, 21, 22,
		22, 17, 16,
		17, 22, 23,
		24, 19, 18,
		19, 24, 25,
		25, 20, 19,
		20, 25, 26,
		26, 21, 20,
		21, 26, 27,
		27, 22, 21,
		22, 27, 28,
		28, 23, 22,
		23, 28, 29,
		30, 25, 24,
		25, 30, 31,
		31, 26, 25,
		26, 31, 32,
		32, 27, 26,
		27, 32, 33,
		33, 28, 27,
		28, 33, 34,
		34, 29, 28,
		29, 34, 35
	};

	TestableTorus* torus = new TestableTorus(5u, 5u, 1.2f, 1.0f, TorusShading::SMOOTH, ValuesRange::ONE_TO_ONE);

	const auto& v = torus->getVertices();
	const auto& i = torus->getIndices();

	REQUIRE(v.size() == expectedVertices.size());
	REQUIRE(i.size() == expectedIndices.size());

	for (size_t idx = 0; idx < v.size(); ++idx) {
		CheckVec3Equal(v[idx].Position, expectedVertices[idx].Position, TEST_EPSILON, "Position");
		CheckVec2Equal(v[idx].TexCoord, expectedVertices[idx].TexCoord, TEST_EPSILON, "TexCoord");
		CheckVec3Equal(v[idx].Normal, expectedVertices[idx].Normal, TEST_EPSILON, "Normal");
		CheckVec3Equal(v[idx].Tangent, expectedVertices[idx].Tangent, TEST_EPSILON, "Tangent");
		CheckVec3Equal(v[idx].Bitangent, expectedVertices[idx].Bitangent, TEST_EPSILON, "Bitangent");
	}

	for (size_t idx = 0; idx < i.size(); ++idx) {
		REQUIRE(i[idx] == expectedIndices[idx]);
	}
}